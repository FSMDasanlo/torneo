<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Torneo de Padel</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <div class="container">
    <header>
      <h1 id="tournamentTitle"><i class="fas fa-tennis-ball"></i> Torneo de Padel</h1>
    </header>

    <div class="tab-navigation card">
      <button class="tab-button active" onclick="openTab(event, 'tab-parejas')">
        <i class="fas fa-users"></i> Parejas
      </button>
      <button class="tab-button" onclick="openTab(event, 'tab-grupos')">
        <i class="fas fa-calendar-alt"></i> Cuadro
      </button>
      <button class="tab-button" onclick="openTab(event, 'tab-resultados')">
        <i class="fas fa-clipboard-check"></i> Resultados
      </button>
      <button class="tab-button" onclick="openTab(event, 'tab-clasificacion')">
        <i class="fas fa-trophy"></i> Clasificación
      </button>
      <button class="tab-button" onclick="openTab(event, 'tab-finales')">
        <i class="fas fa-medal"></i> Eliminatorias
      </button>
      <button class="tab-button" onclick="openTab(event, 'tab-galeria')">
        <i class="fas fa-images"></i> Galería
      </button>
      <a href="index.html" class="btn-home-nav" title="Volver al listado de torneos">
        <i class="fas fa-home"></i>
      </a>
    </div>
    <div id="tab-parejas" class="tab-content card" style="display: block;">
      <div class="section-header">
        <h2><i class="fas fa-user-plus"></i> Añadir pareja</h2>
        <div class="header-buttons">
          <button id="changeTournamentBtn" class="btn-secondary"><i class="fas fa-arrow-left"></i> Cambiar Torneo</button>
        </div>
      </div>

      <!-- NUEVO: Selector de modo de torneo -->
      <div class="section-mode-selector">
        <h4>Modo de Torneo</h4>
        <div class="radio-group">
          <label>
            <input type="radio" name="tournamentMode" value="directed" checked onchange="handleModeChange()">
            <i class="fas fa-sitemap"></i> Dirigido (Manual)
          </label>
          <label>
            <input type="radio" name="tournamentMode" value="semi-directed" onchange="handleModeChange()">
            <i class="fas fa-random"></i> Semidirigido (Sorteo de Grupos)
          </label>
          <label>
            <input type="radio" name="tournamentMode" value="open" onchange="handleModeChange()">
            <i class="fas fa-user-friends"></i> Abierto (Sorteo de Parejas y Grupos)
          </label>
        </div>
      </div>

      <div class="input-limit">
          <label for="limitInput">Límite de parejas por grupo:</label>
          <input type="number" id="limitInput" value="4" min="2" onchange="handleUpdateLimit()">
      </div>

      <!-- Modo Dirigido (el original) -->
      <div id="mode-directed-inputs" class="input-group" style="margin-top: 15px;">
        <select id="groupSelect">
          <option value="1">Grupo 1</option>
          <option value="2">Grupo 2</option>
        </select>
        <input type="text" id="player1" placeholder="Jugador 1">
        <input type="text" id="player2" placeholder="Jugador 2">
        <button id="addPairBtn" class="btn-primary"><i class="fas fa-plus"></i> Añadir Pareja</button>
      </div>

      <!-- Modo Semidirigido -->
      <div id="mode-semi-directed-inputs" class="input-group" style="margin-top: 15px; display: none;">
        <input type="text" id="semi-p1" placeholder="Jugador 1">
        <input type="text" id="semi-p2" placeholder="Jugador 2">
        <button id="addSemiPairBtn" class="btn-primary"><i class="fas fa-plus"></i> Añadir Pareja a la Bolsa</button>
      </div>

      <!-- Modo Abierto -->
      <div id="mode-open-inputs" class="input-group" style="margin-top: 15px; display: none;">
        <input type="text" id="open-player" placeholder="Nombre del Jugador">
        <button id="addOpenPlayerBtn" class="btn-primary"><i class="fas fa-user-plus"></i> Añadir Jugador a la Bolsa</button>
      </div>

      <div id="currentPairs" class="list-container" style="margin-top: 20px;"></div>
    </div>

    <div id="tab-grupos" class="tab-content">
      <div class="section card">
        <h2><i class="fas fa-table-tennis"></i> Partidos de fase de grupos</h2>
        <button id="generateMatchesBtn" class="btn-primary"><i class="fas fa-cogs"></i> Generar partidos</button>
        <div id="matchesList" class="list-container"></div>
      </div>
    </div>

    <div id="tab-resultados" class="tab-content">
      <div class="section card">
        <div class="section-header">
          <h2><i class="fas fa-clipboard-check"></i> Registrar resultados</h2>
          <button id="clearResultsBtn" class="btn-secondary"><i class="fas fa-eraser"></i> Limpiar Resultados</button>
        </div>
        <div id="resultForms" class="result-forms-list"></div>
      </div>
    </div>

    <div id="tab-clasificacion" class="tab-content card">
      <h2><i class="fas fa-sort-amount-down"></i> Clasificación de Grupos</h2>
      <div id="standings" class="standings-view" style="margin-top: 15px;"></div>
    </div>

    <div id="tab-finales" class="tab-content">
      <div class="section card">
        <h2><i class="fas fa-chevron-circle-right"></i> Semifinales</h2>
        <button id="generateSemifinalsBtn" class="btn-primary"><i class="fas fa-cogs"></i> Crear semifinales</button>
        <div id="semis" class="semis-view"></div>
      </div>
      <div class="section card">
        <h2><i class="fas fa-medal"></i> Final y 3er puesto</h2>
        <button id="generateFinalAndThirdPlaceBtn" class="btn-primary"><i class="fas fa-cogs"></i> Generar final y 3er puesto</button>
        <div id="finals" class="finals-view"></div>
      </div>
      <div class="section card">
        <h2><i class="fas fa-award"></i> 5º y 6º Puesto</h2>
        <button id="generateFifthPlaceBtn" class="btn-primary"><i class="fas fa-cogs"></i> Generar partido</button>
        <div id="fifthPlace" class="finals-view"></div>
      </div>
      <div class="section card">
        <h2><i class="fas fa-list-ol"></i> 7º y 8º Puesto</h2>
        <button id="generateSeventhPlaceBtn" class="btn-primary"><i class="fas fa-cogs"></i> Generar partido</button>
        <div id="seventhPlace" class="finals-view"></div>
      </div>
    </div>

    <div id="tab-galeria" class="tab-content card">
      <h2><i class="fas fa-images"></i> Galería del Torneo</h2>
      <div class="carousel-container">
        <div class="carousel-slide">
          <!-- Las imágenes se cargarán aquí dinámicamente -->
        </div>
        <button class="carousel-button prev">&#10094;</button>
        <button class="carousel-button next">&#10095;</button>
      </div>
    </div>

    <!-- Contenedor para notificaciones -->
    <div id="notification-container" style="position: fixed; bottom: 20px; right: 20px; z-index: 1000;">
        <!-- Las notificaciones se añadirán aquí -->
    </div>

    <!-- Modal para Editar Pareja -->
    <div id="editPairModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2><i class="fas fa-edit"></i> Editar Pareja</h2>
            <input type="hidden" id="editPairId">
            <div class="input-group-modal">
                <label for="editPlayer1">Jugador 1:</label>
                <input type="text" id="editPlayer1">
            </div>
            <div class="input-group-modal">
                <label for="editPlayer2">Jugador 2:</label>
                <input type="text" id="editPlayer2">
            </div>
            <button id="savePairChangesBtn" class="btn-primary">Guardar Cambios</button>
        </div>
    </div>
  </div> 
  
  <!-- Scripts de Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <!-- Inicialización de Firebase -->
  <script>
    // Tu configuración de Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyBKYu9icthWhs5kEp0NFHxxcCGBwknAhVA",
      authDomain: "torneospadel.firebaseapp.com",
      projectId: "torneospadel",
      storageBucket: "torneospadel.firebasestorage.app",
      messagingSenderId: "962820410331",
      appId: "1:962820410331:web:a4e658fda5afee8d6cf5fe"
    };

    // Inicializa Firebase
    firebase.initializeApp(firebaseConfig);
  </script>
  
  <!-- Scripts de la aplicación -->
  <script src="js/app.js"></script>
  <script src="js/ui.js"></script>

</body>
</html>